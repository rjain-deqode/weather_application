{"ast":null,"code":"var _jsxFileName = \"/home/deq/Desktop/my_work/React-training-raksha/src/component/CurrentWeather.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport \"./WeatherApp.css\";\nimport { Input } from \"./Input\";\nimport { Button } from \"./Button\";\nimport axios from \"axios\";\nimport WeeklyData from \"./shared/WeeklyData\";\nimport CurrentData from \"./shared/CurrentData\";\nimport Chart from \"./shared/Chart\";\nimport moment from \"moment\";\nimport GoogleMap from \"./shared/GoogleMap\";\nimport Accordion from \"./shared/Accordion\";\nimport ChavronIcon from \"./shared/ChavronIcon\";\nimport \"./shared/Accordion.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CurrentWeather(props) {\n  _s();\n\n  const [search, setSearch] = useState(\"\");\n  const [weeklyWeather, setWeeklyWeather] = useState([]);\n  const ref = useRef();\n  const [xAxis, setXais] = useState([]);\n  const [yAxis, setYaxis] = useState([]); // const [chartDescription, setchartDescription] = useState([]);\n  // const [newChartDes, setNewChartDes] = useState([]);\n  // Accordion\n\n  const [setActive, setActiveState] = useState(\"\");\n  const [setHeight, setHeightState] = useState(\"0px\");\n  const [setRotate, setRotateState] = useState(\"accordion__icon\");\n  const content = useRef(null);\n\n  const toggleAccordion = () => {\n    setActiveState(setActive === \"\" ? \"active\" : \"\");\n    setHeightState(setActive === \"active\" ? \"0px\" : `${content.current.scrollHeight}px`);\n    setRotateState(setActive === \"active\" ? \"accordion__icon\" : \"accordion__icon rotate\");\n    console.log(content.current.scrollHeight);\n  };\n\n  const [data, setData] = useState({\n    temp: 0,\n    minTemperature: [],\n    maxTemperature: [],\n    humidity: \"\",\n    description: \"\",\n    icon: \"\",\n    display: false,\n    pressure: \"\",\n    feelsLike: 0,\n    visibility: \"\",\n    wind: 0,\n    name: \"\"\n  });\n  const [geolocation, setGeolocation] = useState({\n    lat: \"\",\n    log: \"\"\n  });\n  useEffect(() => {\n    if (search === \"\") {\n      navigator.geolocation.getCurrentPosition(function (position) {\n        setGeolocation({ ...geolocation,\n          lat: position.coords.latitude,\n          log: position.coords.longitude\n        });\n      });\n    }\n\n    if (navigator.geolocation) {\n      navigator.geolocation.watchPosition(function (position) {\n        setGeolocation({ ...geolocation,\n          lat: position.coords.latitude,\n          log: position.coords.longitude\n        });\n      });\n    }\n  }, [geolocation.lat, geolocation.log]);\n  useEffect(() => {\n    if (geolocation.lat && geolocation.log) {\n      fetchData();\n    }\n  }, [geolocation.lat, geolocation.log]);\n\n  const fetchWeatherData = async search => {\n    try {\n      const response = await axios({\n        method: \"GET\",\n        url: `http://api.openweathermap.org/data/2.5/weather?q=${search}&appid=35bd10c223b33cc321caa26ce46f7f0b`\n      });\n      setData({\n        temp: response.data.main.temp - 273.15,\n        humidity: response.data.main.humidity,\n        description: response.data.weather[0].description,\n        icon: response.data.weather[0].icon,\n        display: true,\n        pressure: response.data.main.pressure,\n        feelsLike: response.data.main.feels_like - 273.15,\n        visibility: response.data.visibility,\n        wind: response.data.wind.speed,\n        name: response.data.name\n      });\n    } catch (error) {\n      console.error(error.message);\n    }\n  };\n\n  const fetchData = async search => {\n    const apikey = `https://api.openweathermap.org/data/2.5/onecall?lat=${geolocation.lat}&lon=${geolocation.log}&units=metric&exclude`;\n    const response = await fetch(`${apikey}=current&appid=3c072250b7b95a5b2c1f101aabc82b3a`);\n    const dailyForcast = await fetch(`${apikey}=hourly,daily&appid=3c072250b7b95a5b2c1f101aabc82b3a`);\n    const data = await response.json();\n    const dailyData = await dailyForcast.json();\n    setWeeklyWeather(data.daily);\n    console.log(\"current====\", data);\n    setXais(data.hourly);\n    setYaxis(data.hourly);\n    console.log(\"hourly dataaa\", data.hourly); // setchartDescription(data.hourly);\n    // setNewChartDes(chartDescriptionData);\n    // console.log(\"current tem\", dailyData.current);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    fetchWeatherData(search);\n    fetchData();\n    setSearch(prev => prev);\n  };\n\n  useEffect(() => {\n    ref.current = setSearch;\n  }, []);\n  const newXAxisData = xAxis && xAxis.map(res => {\n    const day = moment.unix(res.dt).utc();\n    return moment(day).format(\"h:mm a\");\n  });\n  const newYAxisData = yAxis && yAxis.map(res => {\n    return res.temp;\n  }); // const chartDescriptionData =\n  //   chartDescription &&\n  //   chartDescription.map((res) => {\n  //     return res.weather;\n  //   });\n  // const newChartDescriptionData =\n  //   newChartDes &&\n  //   newChartDes.map((res) => {\n  //     return res.description;\n  //   });\n  // console.log(\"chart description data\", newChartDescriptionData);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app__header\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"search__filter\",\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input__group\",\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            className: \"search__filed\",\n            type: \"search\",\n            value: search,\n            onChange: e => setSearch(e.target.value),\n            placeholder: \"Search City\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            className: \"search__btn\",\n            label: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main__container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid__container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"current__container\",\n          children: /*#__PURE__*/_jsxDEV(CurrentData, {\n            display: data.display,\n            data: data\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"map__section\",\n          children: /*#__PURE__*/_jsxDEV(GoogleMap, {\n            isMarkerShown: true,\n            data: data\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"inner__container\",\n      children: [/*#__PURE__*/_jsxDEV(Chart, {\n        newXAxisData: newXAxisData,\n        newYAxisData: newYAxisData,\n        dataa: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(WeeklyData, {\n        weeklyWeather: weeklyWeather,\n        data: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Accordion, {\n      con: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 167,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CurrentWeather, \"WUPKl1adHQTEnOt5sBUOZRlPg3M=\");\n\n_c = CurrentWeather;\nexport default CurrentWeather;\n\nvar _c;\n\n$RefreshReg$(_c, \"CurrentWeather\");","map":{"version":3,"sources":["/home/deq/Desktop/my_work/React-training-raksha/src/component/CurrentWeather.js"],"names":["React","useState","useEffect","useRef","Input","Button","axios","WeeklyData","CurrentData","Chart","moment","GoogleMap","Accordion","ChavronIcon","CurrentWeather","props","search","setSearch","weeklyWeather","setWeeklyWeather","ref","xAxis","setXais","yAxis","setYaxis","setActive","setActiveState","setHeight","setHeightState","setRotate","setRotateState","content","toggleAccordion","current","scrollHeight","console","log","data","setData","temp","minTemperature","maxTemperature","humidity","description","icon","display","pressure","feelsLike","visibility","wind","name","geolocation","setGeolocation","lat","navigator","getCurrentPosition","position","coords","latitude","longitude","watchPosition","fetchData","fetchWeatherData","response","method","url","main","weather","feels_like","speed","error","message","apikey","fetch","dailyForcast","json","dailyData","daily","hourly","handleSubmit","e","preventDefault","prev","newXAxisData","map","res","day","unix","dt","utc","format","newYAxisData","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport \"./WeatherApp.css\";\nimport { Input } from \"./Input\";\nimport { Button } from \"./Button\";\nimport axios from \"axios\";\nimport WeeklyData from \"./shared/WeeklyData\";\nimport CurrentData from \"./shared/CurrentData\";\nimport Chart from \"./shared/Chart\";\nimport moment from \"moment\";\nimport GoogleMap from \"./shared/GoogleMap\";\nimport Accordion from \"./shared/Accordion\";\nimport ChavronIcon from \"./shared/ChavronIcon\";\nimport \"./shared/Accordion.css\"\n\nfunction CurrentWeather(props) {\n  const [search, setSearch] = useState(\"\");\n  const [weeklyWeather, setWeeklyWeather] = useState([]);\n  const ref = useRef();\n  const [xAxis, setXais] = useState([]);\n  const [yAxis, setYaxis] = useState([]);\n  // const [chartDescription, setchartDescription] = useState([]);\n  // const [newChartDes, setNewChartDes] = useState([]);\n\n  // Accordion\n  const [setActive, setActiveState] = useState(\"\");\n  const [setHeight, setHeightState] = useState(\"0px\");\n  const [setRotate, setRotateState] = useState(\"accordion__icon\");\n\n  const content = useRef(null);\n\n  const toggleAccordion = () => {\n    setActiveState(setActive === \"\" ? \"active\" : \"\");\n    setHeightState(\n      setActive === \"active\" ? \"0px\" : `${content.current.scrollHeight}px`\n    );\n    setRotateState(\n      setActive === \"active\" ? \"accordion__icon\" : \"accordion__icon rotate\"\n    );\n    console.log(content.current.scrollHeight);\n  };\n\n  const [data, setData] = useState({\n    temp: 0,\n    minTemperature: [],\n    maxTemperature: [],\n    humidity: \"\",\n    description: \"\",\n    icon: \"\",\n    display: false,\n    pressure: \"\",\n    feelsLike: 0,\n    visibility: \"\",\n    wind: 0,\n    name: \"\",\n  });\n\n  const [geolocation, setGeolocation] = useState({\n    lat: \"\",\n    log: \"\",\n  });\n\n  useEffect(() => {\n    if (search === \"\") {\n      navigator.geolocation.getCurrentPosition(function (position) {\n        setGeolocation({\n          ...geolocation,\n          lat: position.coords.latitude,\n          log: position.coords.longitude,\n        });\n      });\n    }\n    if (navigator.geolocation) {\n      navigator.geolocation.watchPosition(function (position) {\n        setGeolocation({\n          ...geolocation,\n          lat: position.coords.latitude,\n          log: position.coords.longitude,\n        });\n      });\n    }\n  }, [geolocation.lat, geolocation.log]);\n\n  useEffect(() => {\n    if (geolocation.lat && geolocation.log) {\n      fetchData();\n    }\n  }, [geolocation.lat, geolocation.log]);\n\n  const fetchWeatherData = async (search) => {\n    try {\n      const response = await axios({\n        method: \"GET\",\n        url: `http://api.openweathermap.org/data/2.5/weather?q=${search}&appid=35bd10c223b33cc321caa26ce46f7f0b`,\n      });\n      setData({\n        temp: response.data.main.temp - 273.15,\n        humidity: response.data.main.humidity,\n        description: response.data.weather[0].description,\n        icon: response.data.weather[0].icon,\n        display: true,\n        pressure: response.data.main.pressure,\n        feelsLike: response.data.main.feels_like - 273.15,\n        visibility: response.data.visibility,\n        wind: response.data.wind.speed,\n        name: response.data.name,\n      });\n    } catch (error) {\n      console.error(error.message);\n    }\n  };\n  const fetchData = async (search) => {\n    const apikey = `https://api.openweathermap.org/data/2.5/onecall?lat=${geolocation.lat}&lon=${geolocation.log}&units=metric&exclude`;\n    const response = await fetch(\n      `${apikey}=current&appid=3c072250b7b95a5b2c1f101aabc82b3a`\n    );\n    const dailyForcast = await fetch(\n      `${apikey}=hourly,daily&appid=3c072250b7b95a5b2c1f101aabc82b3a`\n    );\n    const data = await response.json();\n    const dailyData = await dailyForcast.json();\n    setWeeklyWeather(data.daily);\n    console.log(\"current====\", data);\n    setXais(data.hourly);\n    setYaxis(data.hourly);\n    console.log(\"hourly dataaa\", data.hourly);\n    // setchartDescription(data.hourly);\n    // setNewChartDes(chartDescriptionData);\n\n    // console.log(\"current tem\", dailyData.current);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    fetchWeatherData(search);\n    fetchData();\n    setSearch((prev) => prev);\n  };\n\n  useEffect(() => {\n    ref.current = setSearch;\n  }, []);\n\n  const newXAxisData =\n    xAxis &&\n    xAxis.map((res) => {\n      const day = moment.unix(res.dt).utc();\n      return moment(day).format(\"h:mm a\");\n    });\n  const newYAxisData =\n    yAxis &&\n    yAxis.map((res) => {\n      return res.temp;\n    });\n  // const chartDescriptionData =\n  //   chartDescription &&\n  //   chartDescription.map((res) => {\n  //     return res.weather;\n  //   });\n\n  // const newChartDescriptionData =\n  //   newChartDes &&\n  //   newChartDes.map((res) => {\n  //     return res.description;\n  //   });\n  // console.log(\"chart description data\", newChartDescriptionData);\n  return (\n    <div>\n      <div className=\"app__header\">\n        <form className=\"search__filter\" onSubmit={handleSubmit}>\n          <div className=\"input__group\">\n            <Input\n              className=\"search__filed\"\n              type=\"search\"\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n              placeholder=\"Search City\"\n            ></Input>\n            <Button type=\"submit\" className=\"search__btn\" label={\"Search\"} />\n          </div>\n        </form>\n      </div>\n      <div className=\"main__container\">\n        <div className=\"grid__container\">\n          <div className=\"current__container\">\n            <CurrentData display={data.display} data={data} />\n          </div>\n          <div className=\"map__section\">\n            <GoogleMap isMarkerShown data={data} />\n          </div>\n        </div>\n      </div>\n\n      <div className=\"inner__container\">\n        <Chart\n          newXAxisData={newXAxisData}\n          newYAxisData={newYAxisData}\n          dataa={data}\n        />\n        <WeeklyData weeklyWeather={weeklyWeather} data={data} />\n      </div>\n      <Accordion con />\n    </div>\n  );\n}\n\nexport default CurrentWeather;\n"]},"metadata":{},"sourceType":"module"}